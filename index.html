<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>CartoMapbox</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<link href='https://api.mapbox.com/mapbox.js/v2.2.2/mapbox.css' rel='stylesheet' />
<link rel="stylesheet" href="plugins/sidebar/L.Control.Sidebar.css" />
<link rel="stylesheet" href="stylesheets/style.css" />
<script src="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/cartodb.uncompressed.js"></script>
<script src='https://api.tiles.mapbox.com/mapbox.js/v2.2.1/mapbox.standalone.js'></script>
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-draw/v0.2.2/leaflet.draw.css' rel='stylesheet' />
<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-draw/v0.2.2/leaflet.draw.js'></script>

<style>
  body { margin:0; padding:0; }
  #map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
<body>
<div id='map'></div>
<script>

// MapBox
L.mapbox.accessToken = 'pk.eyJ1Ijoia2dybmJyZyIsImEiOiJmU1V5R3JzIn0.n76VCeUTK4h4QAo2eZGNrg';
var map = L.mapbox.map('map', 'kgrnbrg.4634736b').setView([31.245232, 121.556225], 12);

var layers =  L.mapbox.tileLayer('kgrnbrg.ncp2jc8e');
layers.addTo(map);

var featureGroup = L.featureGroup().addTo(map);

var drawControl = new L.Control.Draw({
    edit: {
      featureGroup: featureGroup
    }
  }).addTo(map);

  map.on('draw:created', function(e) {
      featureGroup.addLayer(e.layer);
  });


// CartoDB 
cartodb.createLayer(map, 'https://imamaps.cartodb.com/api/v2/viz/3883d6c2-584d-11e5-a8d3-0e9d821ea90d/viz.json').addTo(map)
        .on('done', function(layer) {
            layer.setZIndex(10);
       
        });

        L.control.layers(layers).addTo(map);


features.on('ready', function() {
  	map.fitBounds(features.getBounds());

});
</script>
</body>
<script src="plugins/jeditable/jquery.jeditable.js"></script>
</html>